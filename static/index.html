<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="pins.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
</head>
<body>
    <nav id="gpio">
        <div id="pinbase"></div>
        <ul class="bottom">
        <li id="pin1" class="pin1 pow3v3"><a href="#" title=""><span class="default"><span class="phys">1</span> 3v3 Power</span><span class="pin"></span></a></li>
        <li id="pin3" class="pin3 gpio i2c"><a href="#" title="Wiring Pi pin 8"><span class="default"><span class="phys">3</span> BCM 2 <small>(SDA)</small></span><span class="pin"></span></a></li>
        <li id="pin5" class="pin5 gpio i2c"><a href="#" title="Wiring Pi pin 9"><span class="default"><span class="phys">5</span> BCM 3 <small>(SCL)</small></span><span class="pin"></span></a></li>
        <li id="pin7" class="pin7 gpio"><a href="#" title="Wiring Pi pin 7"><span class="default"><span class="phys">7</span> BCM 4 <small>(GPCLK0)</small></span><span class="pin"></span></a></li>
        <li id="pin9" class="pin9 gnd"><a href="#" title=""><span class="default"><span class="phys">9</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin11" class="pin11 gpio"><a href="#" title="Wiring Pi pin 0"><span class="default"><span class="phys">11</span> BCM 17 </span><span class="pin"></span></a></li>
        <li id="pin13" class="pin13 gpio"><a href="#" title="Wiring Pi pin 2"><span class="default"><span class="phys">13</span> BCM 27 </span><span class="pin"></span></a></li>
        <li id="pin15" class="pin15 gpio"><a href="#" title="Wiring Pi pin 3"><span class="default"><span class="phys">15</span> BCM 22 </span><span class="pin"></span></a></li>
        <li id="pin17" class="pin17 pow3v3"><a href="#" title=""><span class="default"><span class="phys">17</span> 3v3 Power</span><span class="pin"></span></a></li>
        <li id="pin19" class="pin19 gpio spi"><a href="#" title="Wiring Pi pin 12"><span class="default"><span class="phys">19</span> BCM 10 <small>(MOSI)</small></span><span class="pin"></span></a></li>
        <li id="pin21" class="pin21 gpio spi"><a href="#" title="Wiring Pi pin 13"><span class="default"><span class="phys">21</span> BCM 9 <small>(MISO)</small></span><span class="pin"></span></a></li>
        <li id="pin23" class="pin23 gpio spi"><a href="#" title="Wiring Pi pin 14"><span class="default"><span class="phys">23</span> BCM 11 <small>(SCLK)</small></span><span class="pin"></span></a></li>
        <li id="pin25" class="pin25 gnd"><a href="#" title=""><span class="default"><span class="phys">25</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin27" class="pin27 gpio i2c"><a href="#" title="Wiring Pi pin 30"><span class="default"><span class="phys">27</span> BCM 0 <small>(ID_SD)</small></span><span class="pin"></span></a></li>
        <li id="pin29" class="pin29 gpio"><a href="#" title="Wiring Pi pin 21"><span class="default"><span class="phys">29</span> BCM 5 </span><span class="pin"></span></a></li>
        <li id="pin31" class="pin31 gpio"><a href="#" title="Wiring Pi pin 22"><span class="default"><span class="phys">31</span> BCM 6 </span><span class="pin"></span></a></li>
        <li id="pin33" class="pin33 gpio"><a href="#" title="Wiring Pi pin 23"><span class="default"><span class="phys">33</span> BCM 13 <small>(PWM1)</small></span><span class="pin"></span></a></li>
        <li id="pin35" class="pin35 gpio spi"><a href="#" title="Wiring Pi pin 24"><span class="default"><span class="phys">35</span> BCM 19 <small>(MISO)</small></span><span class="pin"></span></a></li>
        <li id="pin37" class="pin37 gpio"><a href="#" title="Wiring Pi pin 25"><span class="default"><span class="phys">37</span> BCM 26 </span><span class="pin"></span></a></li>
        <li id="pin39" class="pin39 gnd"><a href="#" title=""><span class="default"><span class="phys">39</span> Ground</span><span class="pin"></span></a></li>
        </ul>
        <ul class="top">
        <li id="pin2" class="pin2 pow5v"><a href="#" title=""><span class="default"><span class="phys">2</span> 5v Power</span><span class="pin"></span></a></li>
        <li id="pin4" class="pin4 pow5v"><a href="#" title=""><span class="default"><span class="phys">4</span> 5v Power</span><span class="pin"></span></a></li>
        <li id="pin6" class="pin6 gnd"><a href="#" title=""><span class="default"><span class="phys">6</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin8" class="pin8 gpio uart"><a href="#" title="Wiring Pi pin 15"><span class="default"><span class="phys">8</span> BCM 14 <small>(TXD)</small></span><span class="pin"></span></a></li>
        <li id="pin10" class="pin10 gpio uart"><a href="#" title="Wiring Pi pin 16"><span class="default"><span class="phys">10</span> BCM 15 <small>(RXD)</small></span><span class="pin"></span></a></li>
        <li id="pin12" class="pin12 gpio"><a href="#" title="Wiring Pi pin 1"><span class="default"><span class="phys">12</span> BCM 18 <small>(PWM0)</small></span><span class="pin"></span></a></li>
        <li id="pin14" class="pin14 gnd"><a href="#" title=""><span class="default"><span class="phys">14</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin16" class="pin16 gpio"><a href="#" title="Wiring Pi pin 4"><span class="default"><span class="phys">16</span> BCM 23 </span><span class="pin"></span></a></li>
        <li id="pin18" class="pin18 gpio"><a href="#" title="Wiring Pi pin 5"><span class="default"><span class="phys">18</span> BCM 24 </span><span class="pin"></span></a></li>
        <li id="pin20" class="pin20 gnd"><a href="#" title=""><span class="default"><span class="phys">20</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin22" class="pin22 gpio"><a href="#" title="Wiring Pi pin 6"><span class="default"><span class="phys">22</span> BCM 25 </span><span class="pin"></span></a></li>
        <li id="pin24" class="pin24 gpio spi"><a href="#" title="Wiring Pi pin 10"><span class="default"><span class="phys">24</span> BCM 8 <small>(CE0)</small></span><span class="pin"></span></a></li>
        <li id="pin26" class="pin26 gpio spi"><a href="#" title="Wiring Pi pin 11"><span class="default"><span class="phys">26</span> BCM 7 <small>(CE1)</small></span><span class="pin"></span></a></li>
        <li id="pin28" class="pin28 gpio i2c"><a href="#" title="Wiring Pi pin 31"><span class="default"><span class="phys">28</span> BCM 1 <small>(ID_SC)</small></span><span class="pin"></span></a></li>
        <li id="pin30" class="pin30 gnd"><a href="#" title=""><span class="default"><span class="phys">30</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin32" class="pin32 gpio"><a href="#" title="Wiring Pi pin 26"><span class="default"><span class="phys">32</span> BCM 12 <small>(PWM0)</small></span><span class="pin"></span></a></li>
        <li id="pin34" class="pin34 gnd"><a href="#" title=""><span class="default"><span class="phys">34</span> Ground</span><span class="pin"></span></a></li>
        <li id="pin36" class="pin36 gpio"><a href="#" title="Wiring Pi pin 27"><span class="default"><span class="phys">36</span> BCM 16 </span><span class="pin"></span></a></li>
        <li id="pin38" class="pin38 gpio spi"><a href="#" title="Wiring Pi pin 28"><span class="default"><span class="phys">38</span> BCM 20 <small>(MOSI)</small></span><span class="pin"></span></a></li>
        <li id="pin40" class="pin40 gpio spi"><a href="#" title="Wiring Pi pin 29"><span class="default"><span class="phys">40</span> BCM 21 <small>(SCLK)</small></span><span class="pin"></span></a></li>
        </ul>
        </nav>
        <!-- <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> -->
        <!-- Your custom script here -->
        <!-- <script type="text/babel"> -->
        <script>
        var pins = document.querySelectorAll("li")
        pins.forEach((pin) => {
            pin.addEventListener('click', function() {
                var pin = this.id;
                toggleGPIO(pin);
            });
        });

        async function fetchStatus(pin) {
            var status = await fetch(`/status/${pin}`)
            .then(res => res.json())
            .then(response => {
                d3.select('#' + pin).classed("glow", d3.select("#" + pin).classed("glow") ? false : true)
            })
            .then(response => console.log('Success:', JSON.stringify(response)))
            .catch(error => console.error('Error:', error));
        }

        async function toggleGPIO(pin) {
            var status = await fetch(`/toggle/${pin}`)
            .then(res => res.json())
            .then(response => {
                d3.select('#' + pin).classed("glow", response.status);
            })
            .then(response => console.log('Success:', JSON.stringify(response)))
            .catch(error => console.error('Error:', error));
        }
        </script>
</body>
</html>
